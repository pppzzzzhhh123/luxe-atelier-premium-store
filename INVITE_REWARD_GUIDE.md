# 分享返现功能说明文档

## 功能概述

分享返现是一个用户增长和激励系统，通过邀请好友注册和下单，邀请人和被邀请人都能获得奖励。

---

## 功能特点

### 🎁 奖励机制

1. **注册奖励**
   - 好友使用邀请码注册成功
   - 邀请人获得：¥20 现金奖励
   - 被邀请人获得：¥50 优惠券

2. **首单奖励**
   - 好友完成首笔订单
   - 邀请人获得：订单金额 5% 返现
   - 被邀请人获得：首单立减优惠

3. **持续奖励**
   - 好友每次下单
   - 邀请人获得：订单金额 2% 返现（可选）

---

## 页面结构

### 1. 邀请页面（主页）

#### 收益卡片
- 显示累计收益总额
- 显示已邀请人数
- 显示待到账金额
- 显示已到账金额
- 渐变紫粉色背景，视觉吸引力强

#### 邀请码区域
- 显示个人专属邀请码（如：LUXE8888）
- 一键复制邀请码功能
- 渐变背景突出显示

#### 奖励规则说明
- 注册奖励：好友注册获得 ¥20
- 首单奖励：好友首单获得 5% 返现
- 好友福利：新用户获得 ¥50 优惠券

#### 分享按钮
- 大按钮，渐变色背景
- 点击打开分享弹窗

### 2. 我的好友页面

#### 好友列表
每个好友卡片显示：
- 头像和昵称
- 注册时间
- 订单数量
- 获得的奖励金额
- 状态标签（已返现/待返现）

#### 空状态
- 无好友时显示引导
- 引导用户去邀请页面

### 3. 返现记录页面

#### 记录列表
每条记录显示：
- 奖励类型（注册奖励/首单奖励）
- 来源好友
- 奖励金额
- 到账时间
- 状态（已到账/待到账）

#### 空状态
- 无记录时显示提示

---

## 分享功能

### 分享渠道
1. **微信好友** - 直接分享给微信好友
2. **微信朋友圈** - 分享到朋友圈
3. **QQ** - 分享到QQ
4. **微博** - 分享到微博
5. **复制链接** - 复制邀请链接

### 分享内容
```
我在LUÒJIAWANG璐珈女装发现了超棒的商品！
使用我的邀请码 LUXE8888 注册，你我都能获得优惠券！
https://luxe-atelier.com/invite/LUXE8888
```

---

## 数据结构

### 邀请数据
```typescript
interface InviteData {
  inviteCode: string;        // 邀请码
  totalInvited: number;      // 总邀请人数
  totalReward: number;       // 累计收益
  pendingReward: number;     // 待到账金额
  completedReward: number;   // 已到账金额
}
```

### 好友数据
```typescript
interface InvitedFriend {
  id: number;
  name: string;              // 好友昵称
  avatar: string;            // 头像
  registerTime: string;      // 注册时间
  orderCount: number;        // 订单数量
  reward: number;            // 获得奖励
  status: 'pending' | 'completed';  // 状态
}
```

### 返现记录
```typescript
interface RewardRecord {
  id: number;
  type: string;              // 奖励类型
  friend: string;            // 来源好友
  amount: number;            // 金额
  time: string;              // 时间
  status: string;            // 状态
}
```

---

## 后端API接口

### 1. 获取邀请数据
```typescript
GET /api/invite/info

Response:
{
  inviteCode: "LUXE8888",
  totalInvited: 12,
  totalReward: 580.00,
  pendingReward: 120.00,
  completedReward: 460.00
}
```

### 2. 获取好友列表
```typescript
GET /api/invite/friends?page=1&limit=20

Response:
{
  total: 12,
  list: [
    {
      id: 1,
      name: "张**",
      avatar: "...",
      registerTime: "2026-01-15 14:30",
      orderCount: 3,
      reward: 50.00,
      status: "completed"
    }
  ]
}
```

### 3. 获取返现记录
```typescript
GET /api/invite/records?page=1&limit=20

Response:
{
  total: 25,
  list: [
    {
      id: 1,
      type: "注册奖励",
      friend: "张**",
      amount: 20.00,
      time: "2026-01-15 14:35",
      status: "已到账"
    }
  ]
}
```

### 4. 验证邀请码
```typescript
POST /api/invite/validate
Body: { inviteCode: "LUXE8888" }

Response:
{
  valid: true,
  inviterName: "王**",
  reward: {
    coupon: 50,
    description: "新用户专享优惠券"
  }
}
```

### 5. 使用邀请码注册
```typescript
POST /api/auth/register
Body: {
  phone: "13800138000",
  code: "123456",
  password: "password123",
  name: "张三",
  inviteCode: "LUXE8888"  // 可选
}

Response:
{
  token: "...",
  user: {...},
  reward: {
    coupon: 50,
    message: "恭喜获得50元优惠券"
  }
}
```

---

## 业务逻辑

### 注册流程
1. 用户A分享邀请码给用户B
2. 用户B使用邀请码注册
3. 系统验证邀请码有效性
4. 注册成功后：
   - 用户A获得 ¥20 现金奖励（立即到账）
   - 用户B获得 ¥50 优惠券
   - 建立邀请关系

### 首单流程
1. 用户B完成首笔订单
2. 订单支付成功后
3. 系统计算返现金额（订单金额 × 5%）
4. 用户A获得返现（24小时内到账）

### 提现规则
- 返现金额自动到账钱包
- 可用于购物抵扣
- 可申请提现到银行卡/支付宝
- 最低提现金额：¥10
- 提现手续费：0%

---

## 防作弊机制

### 1. 邀请码限制
- 每个用户只能使用一次邀请码
- 邀请码不能自己使用
- 同一设备/IP限制注册数量

### 2. 订单验证
- 必须是真实有效订单
- 订单完成后才发放奖励
- 退款订单扣除相应奖励

### 3. 风控规则
- 异常行为检测
- 批量注册识别
- 虚假交易拦截

---

## 用户体验优化

### 1. 视觉设计
- 使用渐变色（紫色到粉色）吸引注意
- 大数字显示收益，增强成就感
- 清晰的状态标识（已到账/待到账）

### 2. 交互优化
- 一键复制邀请码
- 多渠道分享选项
- 实时更新数据
- 友好的空状态提示

### 3. 激励设计
- 显示累计收益，增强成就感
- 显示好友列表，社交证明
- 清晰的奖励规则说明
- 即时反馈（复制成功提示）

---

## 运营建议

### 1. 推广策略
- 首页Banner推广
- 订单完成页推荐
- 个人中心突出入口
- Push通知提醒

### 2. 活动玩法
- 限时双倍奖励
- 邀请排行榜
- 阶梯奖励（邀请越多奖励越高）
- 节日特别活动

### 3. 数据监控
- 邀请转化率
- 好友留存率
- 平均邀请人数
- ROI分析

---

## 技术实现

### 前端组件
- `InviteReward.tsx` - 主组件
- 三个Tab页面切换
- 分享弹窗
- 数据展示和交互

### 状态管理
- 使用 React Hooks
- LocalStorage 缓存
- 实时数据更新

### 样式设计
- Tailwind CSS
- 渐变色背景
- 响应式布局
- 动画效果

---

## 测试要点

### 功能测试
- [ ] 邀请码复制功能
- [ ] 邀请链接复制功能
- [ ] 分享到各平台
- [ ] Tab切换正常
- [ ] 数据显示正确
- [ ] 空状态显示

### 兼容性测试
- [ ] iOS Safari
- [ ] Android Chrome
- [ ] 微信内置浏览器
- [ ] 各种屏幕尺寸

### 性能测试
- [ ] 页面加载速度
- [ ] 列表滚动流畅度
- [ ] 动画性能

---

## 上线清单

### 开发阶段
- [x] 前端页面开发
- [x] 组件集成
- [x] 路由配置
- [ ] 后端API对接
- [ ] 数据联调

### 测试阶段
- [ ] 功能测试
- [ ] 兼容性测试
- [ ] 性能测试
- [ ] 安全测试

### 上线准备
- [ ] 运营素材准备
- [ ] 用户协议更新
- [ ] 客服培训
- [ ] 监控配置

---

## 总结

分享返现功能是一个完整的用户增长系统，通过合理的激励机制促进用户自发传播，实现低成本获客。

**核心价值：**
1. 降低获客成本
2. 提高用户粘性
3. 增加订单量
4. 建立社交网络

**成功关键：**
1. 简单易懂的规则
2. 即时的奖励反馈
3. 便捷的分享方式
4. 持续的运营优化
