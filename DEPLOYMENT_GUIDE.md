# ğŸš€ ç’çˆå¥³è£… - å®Œæ•´éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
2. [æ­¥éª¤ 1ï¼šé…ç½® Supabase æ•°æ®åº“](#æ­¥éª¤-1é…ç½®-supabase-æ•°æ®åº“)
3. [æ­¥éª¤ 2ï¼šéƒ¨ç½²åç«¯åˆ° Vercel](#æ­¥éª¤-2éƒ¨ç½²åç«¯åˆ°-vercel)
4. [æ­¥éª¤ 3ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel](#æ­¥éª¤-3éƒ¨ç½²å‰ç«¯åˆ°-vercel)
5. [æ­¥éª¤ 4ï¼šå®Œæ•´æµ‹è¯•æµç¨‹](#æ­¥éª¤-4å®Œæ•´æµ‹è¯•æµç¨‹)
6. [å¸¸è§é—®é¢˜è§£å†³](#å¸¸è§é—®é¢˜è§£å†³)

---

## å‡†å¤‡å·¥ä½œ

### 1. å®‰è£…å¿…è¦å·¥å…·

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆéœ€è¦ >= 18ï¼‰
node -v

# å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œè¯·è®¿é—® https://nodejs.org/ ä¸‹è½½æœ€æ–°ç‰ˆæœ¬

# å®‰è£… Vercel CLI
npm install -g vercel

# éªŒè¯å®‰è£…
vercel --version
```

### 2. æ³¨å†Œè´¦å·

- **Supabase**: https://supabase.com/ ï¼ˆä½¿ç”¨ GitHub è´¦å·ç™»å½•ï¼‰
- **Vercel**: https://vercel.com/ ï¼ˆä½¿ç”¨ GitHub è´¦å·ç™»å½•ï¼‰

### 3. å‡†å¤‡é¡¹ç›®

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd c:/Users/pizhe/Downloads/luxe-atelier-premium-store

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
ls
```

---

## æ­¥éª¤ 1ï¼šé…ç½® Supabase æ•°æ®åº“

### 1.1 åˆ›å»º Supabase é¡¹ç›®

1. è®¿é—® https://app.supabase.com/
2. ç‚¹å‡» **"New project"**
3. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Name**: `luxe-atelier` æˆ–ä»»æ„åç§°
   - **Database Password**: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆ**åŠ¡å¿…ä¿å­˜ï¼**ï¼‰
   - **Region**: é€‰æ‹© `Northeast Asia (Tokyo)` æˆ–æœ€è¿‘çš„åŒºåŸŸ
   - **Pricing Plan**: é€‰æ‹© `Free` å…è´¹ç‰ˆ
4. ç‚¹å‡» **"Create new project"**
5. ç­‰å¾… 2-3 åˆ†é’Ÿï¼Œé¡¹ç›®åˆå§‹åŒ–å®Œæˆ

### 1.2 è·å– API å¯†é’¥

1. åœ¨é¡¹ç›®é¡µé¢ï¼Œç‚¹å‡»å·¦ä¾§èœå• **"Settings"** â†’ **"API"**
2. æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯å¹¶**å¤åˆ¶ä¿å­˜**ï¼š
   ```
   Project URL: https://xxxxx.supabase.co
   anon public: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   service_role: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

### 1.3 æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

1. ç‚¹å‡»å·¦ä¾§èœå• **"SQL Editor"**
2. ç‚¹å‡» **"New query"**
3. æ‰“å¼€æœ¬åœ°æ–‡ä»¶ `backend/supabase/migrations/001_initial_schema.sql`
4. **å¤åˆ¶å…¨éƒ¨å†…å®¹**ï¼ˆçº¦ 500 è¡Œï¼‰
5. **ç²˜è´´åˆ° Supabase SQL Editor**
6. ç‚¹å‡»å³ä¸‹è§’ **"Run"** æŒ‰é’®
7. ç­‰å¾…æ‰§è¡Œå®Œæˆï¼ˆçº¦ 10-20 ç§’ï¼‰
8. çœ‹åˆ° **"Success. No rows returned"** è¡¨ç¤ºæˆåŠŸ

### 1.4 éªŒè¯è¡¨åˆ›å»º

1. ç‚¹å‡»å·¦ä¾§èœå• **"Table Editor"**
2. åº”è¯¥çœ‹åˆ° 20 å¼ è¡¨ï¼š
   - âœ… users
   - âœ… products
   - âœ… categories
   - âœ… orders
   - âœ… order_items
   - âœ… cart_items
   - âœ… addresses
   - âœ… coupons
   - âœ… user_coupons
   - âœ… points_records
   - âœ… invite_records
   - âœ… reward_records
   - âœ… wallet_transactions
   - âœ… posts
   - âœ… post_comments
   - âœ… reviews
   - âœ… refunds
   - âœ… checkin_records
   - âœ… memberships
   - âœ… system_configs

### 1.5 æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰

```sql
-- æ’å…¥æµ‹è¯•å•†å“åˆ†ç±»
INSERT INTO categories (name, slug, description, is_active) VALUES
  ('è¿è¡£è£™', 'dresses', 'ä¼˜é›…è¿è¡£è£™ç³»åˆ—', true),
  ('ä¸Šè¡£', 'tops', 'æ—¶å°šä¸Šè¡£ç³»åˆ—', true),
  ('è£¤è£…', 'pants', 'èˆ’é€‚è£¤è£…ç³»åˆ—', true);

-- æ’å…¥æµ‹è¯•å•†å“
INSERT INTO products (title, description, price, original_price, category_id, images, stock, is_hot, is_new, is_active) 
SELECT 
  'ä¼˜é›…è•¾ä¸è¿è¡£è£™',
  'ç²¾è‡´è•¾ä¸å·¥è‰ºï¼Œå±•ç°å¥³æ€§ä¼˜é›…æ°”è´¨',
  599.00,
  899.00,
  id,
  ARRAY['https://images.unsplash.com/photo-1595777457583-95e059d581b8'],
  100,
  true,
  true,
  true
FROM categories WHERE slug = 'dresses' LIMIT 1;

INSERT INTO products (title, description, price, original_price, category_id, images, stock, is_hot, is_active) 
SELECT 
  'ç®€çº¦ç™½è‰²è¡¬è¡«',
  'ç»å…¸ç™¾æ­æ¬¾å¼ï¼ŒèŒåœºå¿…å¤‡',
  299.00,
  399.00,
  id,
  ARRAY['https://images.unsplash.com/photo-1624206112918-f140f087f9b5'],
  150,
  true,
  true
FROM categories WHERE slug = 'tops' LIMIT 1;
```

---

## æ­¥éª¤ 2ï¼šéƒ¨ç½²åç«¯åˆ° Vercel

### 2.1 å‡†å¤‡åç«¯ä»£ç 

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–
npm install

# å¦‚æœé‡åˆ°é”™è¯¯ï¼Œå°è¯•æ¸…ç†ç¼“å­˜
npm cache clean --force
npm install
```

### 2.2 åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

```bash
# åˆ›å»º .env æ–‡ä»¶
# Windows PowerShell:
New-Item -Path .env -ItemType File

# æˆ–ä½¿ç”¨è®°äº‹æœ¬åˆ›å»º
notepad .env
```

åœ¨ `.env` æ–‡ä»¶ä¸­å¡«å…¥ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…å€¼ï¼‰ï¼š

```env
# Supabase é…ç½®
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# JWT å¯†é’¥ï¼ˆç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼‰
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=production
```

### 2.3 æœ¬åœ°æµ‹è¯•åç«¯

```bash
# ç¼–è¯‘ TypeScript
npm run build

# å¯åŠ¨æœåŠ¡å™¨
npm start

# åº”è¯¥çœ‹åˆ°ï¼š
# Server running on port 3000
# Connected to Supabase
```

åœ¨æµè§ˆå™¨è®¿é—® `http://localhost:3000/health`ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```json
{
  "status": "ok",
  "timestamp": "2024-01-17T12:00:00.000Z"
}
```

**æµ‹è¯•æˆåŠŸåæŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨**

### 2.4 éƒ¨ç½²åˆ° Vercel

```bash
# ç¡®ä¿åœ¨ backend ç›®å½•
pwd  # åº”è¯¥æ˜¾ç¤º .../luxe-atelier-premium-store/backend

# ç™»å½• Vercelï¼ˆä¼šæ‰“å¼€æµè§ˆå™¨ï¼‰
vercel login

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

**éƒ¨ç½²è¿‡ç¨‹ä¸­çš„äº¤äº’ï¼š**

```
? Set up and deploy "~/backend"? [Y/n] y
? Which scope do you want to deploy to? [é€‰æ‹©ä½ çš„è´¦å·]
? Link to existing project? [N/y] n
? What's your project's name? luxe-atelier-backend
? In which directory is your code located? ./
? Want to override the settings? [y/N] y
? Which settings? (Press <space> to select)
  â—¯ Build Command
  â—¯ Output Directory
  â—‰ Install Command
  â—¯ Development Command
? What's your Install Command? npm install
```

ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰ï¼Œä¼šæ˜¾ç¤ºï¼š

```
âœ… Production: https://luxe-atelier-backend.vercel.app [copied to clipboard]
```

**ä¿å­˜è¿™ä¸ª URLï¼**

### 2.5 åœ¨ Vercel é…ç½®ç¯å¢ƒå˜é‡

1. è®¿é—® https://vercel.com/dashboard
2. æ‰¾åˆ° `luxe-atelier-backend` é¡¹ç›®
3. ç‚¹å‡» **"Settings"** â†’ **"Environment Variables"**
4. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼ˆ**æ¯ä¸ªéƒ½è¦æ·»åŠ **ï¼‰ï¼š

| Name | Value | Environment |
|------|-------|-------------|
| `SUPABASE_URL` | `https://xxxxx.supabase.co` | Production |
| `SUPABASE_ANON_KEY` | `eyJhbGci...` | Production |
| `SUPABASE_SERVICE_KEY` | `eyJhbGci...` | Production |
| `JWT_SECRET` | `your-secret-key` | Production |
| `NODE_ENV` | `production` | Production |

5. ç‚¹å‡» **"Save"**
6. å›åˆ° **"Deployments"** é¡µé¢
7. ç‚¹å‡»æœ€æ–°éƒ¨ç½²å³ä¾§çš„ **"..."** â†’ **"Redeploy"**
8. ç­‰å¾…é‡æ–°éƒ¨ç½²å®Œæˆ

### 2.6 éªŒè¯åç«¯éƒ¨ç½²

è®¿é—®ä»¥ä¸‹ URLï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…åŸŸåï¼‰ï¼š

```
https://luxe-atelier-backend.vercel.app/health
```

åº”è¯¥è¿”å›ï¼š

```json
{
  "status": "ok",
  "timestamp": "2024-01-17T12:00:00.000Z"
}
```

---

## æ­¥éª¤ 3ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

### 3.1 å‡†å¤‡å‰ç«¯ä»£ç 

```bash
# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..

# ç¡®è®¤ä½ç½®
pwd  # åº”è¯¥æ˜¾ç¤º .../luxe-atelier-premium-store

# å®‰è£…ä¾èµ–
npm install
```

### 3.2 åˆ›å»ºå‰ç«¯ç¯å¢ƒå˜é‡

```bash
# åˆ›å»º .env æ–‡ä»¶
notepad .env
```

å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼ˆ**æ›¿æ¢ä¸ºå®é™…å€¼**ï¼‰ï¼š

```env
# åç«¯ API åœ°å€ï¼ˆæ­¥éª¤ 2.4 è·å¾—çš„ URLï¼‰
VITE_API_URL=https://luxe-atelier-backend.vercel.app

# Supabase é…ç½®ï¼ˆä¸åç«¯ç›¸åŒï¼‰
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 3.3 æ›´æ–° API é…ç½®æ–‡ä»¶

æ‰“å¼€ `frontend/src/api/index.ts`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç¡®ä¿ baseURL ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```typescript
const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:3000',
  timeout: 10000,
});
```

### 3.4 æœ¬åœ°æµ‹è¯•å‰ç«¯

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# åº”è¯¥çœ‹åˆ°ï¼š
# VITE v5.x.x  ready in xxx ms
# âœ  Local:   http://localhost:5173/
```

åœ¨æµè§ˆå™¨è®¿é—® `http://localhost:5173/`ï¼Œæ£€æŸ¥ï¼š
- âœ… é¡µé¢æ­£å¸¸åŠ è½½
- âœ… æ²¡æœ‰æ§åˆ¶å°é”™è¯¯
- âœ… å¯ä»¥çœ‹åˆ°å•†å“åˆ—è¡¨ï¼ˆå¦‚æœæ’å…¥äº†æµ‹è¯•æ•°æ®ï¼‰

**æµ‹è¯•æˆåŠŸåæŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨**

### 3.5 æ„å»ºå‰ç«¯

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# åº”è¯¥çœ‹åˆ°ï¼š
# vite v5.x.x building for production...
# âœ“ xxxx modules transformed.
# dist/index.html  x.xx kB
# ...
# âœ“ built in xxxs
```

### 3.6 éƒ¨ç½²åˆ° Vercel

```bash
# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

**éƒ¨ç½²è¿‡ç¨‹ä¸­çš„äº¤äº’ï¼š**

```
? Set up and deploy "~/"? [Y/n] y
? Which scope? [é€‰æ‹©ä½ çš„è´¦å·]
? Link to existing project? [N/y] n
? What's your project's name? luxe-atelier
? In which directory is your code located? ./
? Want to override the settings? [y/N] n
```

ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰ï¼Œä¼šæ˜¾ç¤ºï¼š

```
âœ… Production: https://luxe-atelier.vercel.app [copied to clipboard]
```

### 3.7 åœ¨ Vercel é…ç½®å‰ç«¯ç¯å¢ƒå˜é‡

1. è®¿é—® https://vercel.com/dashboard
2. æ‰¾åˆ° `luxe-atelier` é¡¹ç›®
3. ç‚¹å‡» **"Settings"** â†’ **"Environment Variables"**
4. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

| Name | Value | Environment |
|------|-------|-------------|
| `VITE_API_URL` | `https://luxe-atelier-backend.vercel.app` | Production |
| `VITE_SUPABASE_URL` | `https://xxxxx.supabase.co` | Production |
| `VITE_SUPABASE_ANON_KEY` | `eyJhbGci...` | Production |

5. ç‚¹å‡» **"Save"**
6. å›åˆ° **"Deployments"** â†’ **"Redeploy"**

### 3.8 é…ç½® CORSï¼ˆé‡è¦ï¼ï¼‰

å›åˆ°åç«¯é¡¹ç›®ï¼Œæ›´æ–° `backend/src/index.ts` çš„ CORS é…ç½®ï¼š

```typescript
app.use(cors({
  origin: [
    'http://localhost:5173',
    'https://luxe-atelier.vercel.app',  // æ·»åŠ ä½ çš„å‰ç«¯åŸŸå
  ],
  credentials: true,
}));
```

é‡æ–°éƒ¨ç½²åç«¯ï¼š

```bash
cd backend
vercel --prod
```

---

## æ­¥éª¤ 4ï¼šå®Œæ•´æµ‹è¯•æµç¨‹

### 4.1 è®¿é—®ç½‘ç«™

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š`https://luxe-atelier.vercel.app`

### 4.2 æµ‹è¯•ç”¨æˆ·æ³¨å†Œ

1. ç‚¹å‡»å³ä¸Šè§’ **"ç™»å½•/æ³¨å†Œ"** æŒ‰é’®
2. åˆ‡æ¢åˆ° **"æ³¨å†Œ"** æ ‡ç­¾
3. å¡«å†™ä¿¡æ¯ï¼š
   ```
   æ‰‹æœºå·ï¼š13800138000
   éªŒè¯ç ï¼š123456ï¼ˆæµ‹è¯•ç¯å¢ƒå›ºå®šéªŒè¯ç ï¼‰
   å¯†ç ï¼šTest123456
   ç¡®è®¤å¯†ç ï¼šTest123456
   é‚€è¯·ç ï¼šï¼ˆç•™ç©ºæˆ–è¾“å…¥å·²æœ‰ç”¨æˆ·çš„é‚€è¯·ç ï¼‰
   ```
4. ç‚¹å‡» **"æ³¨å†Œ"**
5. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ³¨å†ŒæˆåŠŸæç¤º
   - âœ… è‡ªåŠ¨ç™»å½•
   - âœ… å³ä¸Šè§’æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
   - âœ… å¦‚æœå¡«å†™äº†é‚€è¯·ç ï¼Œåº”æ”¶åˆ° 2 å¼  Â¥10 ä¼˜æƒ åˆ¸

**éªŒè¯æ•°æ®åº“ï¼š**
- æ‰“å¼€ Supabase â†’ Table Editor â†’ `users`
- åº”è¯¥çœ‹åˆ°æ–°æ³¨å†Œçš„ç”¨æˆ·è®°å½•
- å¤åˆ¶ç”¨æˆ·çš„ `invite_code`ï¼ˆç”¨äºåç»­æµ‹è¯•ï¼‰

### 4.3 æµ‹è¯•ç”¨æˆ·ç™»å½•

1. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ **"é€€å‡ºç™»å½•"**
2. ç‚¹å‡» **"ç™»å½•/æ³¨å†Œ"**
3. å¡«å†™ä¿¡æ¯ï¼š
   ```
   æ‰‹æœºå·ï¼š13800138000
   å¯†ç ï¼šTest123456
   ```
4. ç‚¹å‡» **"ç™»å½•"**
5. **é¢„æœŸç»“æœ**ï¼š
   - âœ… ç™»å½•æˆåŠŸ
   - âœ… è·³è½¬åˆ°é¦–é¡µ
   - âœ… å³ä¸Šè§’æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

### 4.4 æµ‹è¯•æµè§ˆå•†å“

1. åœ¨é¦–é¡µæŸ¥çœ‹å•†å“åˆ—è¡¨
2. ç‚¹å‡»ä»»æ„å•†å“å¡ç‰‡
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… è¿›å…¥å•†å“è¯¦æƒ…é¡µ
   - âœ… æ˜¾ç¤ºå•†å“å›¾ç‰‡ã€ä»·æ ¼ã€æè¿°
   - âœ… æ˜¾ç¤ºè§„æ ¼é€‰æ‹©ï¼ˆå¦‚æœ‰ï¼‰
   - âœ… æ˜¾ç¤ºåº“å­˜ä¿¡æ¯

**å¦‚æœæ²¡æœ‰å•†å“ï¼š**
- å›åˆ° Supabase SQL Editor
- æ‰§è¡Œæ­¥éª¤ 1.5 çš„æµ‹è¯•æ•°æ®æ’å…¥è„šæœ¬

### 4.5 æµ‹è¯•æ·»åŠ è´­ç‰©è½¦

1. åœ¨å•†å“è¯¦æƒ…é¡µ
2. é€‰æ‹©è§„æ ¼ï¼ˆå¦‚æœ‰ï¼‰
3. é€‰æ‹©æ•°é‡ï¼ˆé»˜è®¤ 1ï¼‰
4. ç‚¹å‡» **"åŠ å…¥è´­ç‰©è½¦"**
5. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºæˆåŠŸæç¤º
   - âœ… è´­ç‰©è½¦å›¾æ ‡æ˜¾ç¤ºæ•°é‡å¾½ç« 
6. ç‚¹å‡»å³ä¸Šè§’è´­ç‰©è½¦å›¾æ ‡
7. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºè´­ç‰©è½¦å¼¹çª—
   - âœ… åˆ—å‡ºåˆšæ·»åŠ çš„å•†å“
   - âœ… å¯ä»¥ä¿®æ”¹æ•°é‡
   - âœ… å¯ä»¥åˆ é™¤å•†å“
   - âœ… æ˜¾ç¤ºæ€»ä»·

**éªŒè¯æ•°æ®åº“ï¼š**
- Supabase â†’ `cart_items` è¡¨
- åº”è¯¥çœ‹åˆ°æ–°å¢çš„è´­ç‰©è½¦è®°å½•

### 4.6 æµ‹è¯•åˆ›å»ºè®¢å•

1. åœ¨è´­ç‰©è½¦ä¸­ç‚¹å‡» **"å»ç»“ç®—"**
2. **é¢„æœŸç»“æœ**ï¼šè¿›å…¥ç»“ç®—é¡µé¢

#### 4.6.1 æ·»åŠ æ”¶è´§åœ°å€

1. ç‚¹å‡» **"æ·»åŠ æ–°åœ°å€"**
2. å¡«å†™ä¿¡æ¯ï¼š
   ```
   æ”¶è´§äººï¼šå¼ ä¸‰
   æ‰‹æœºå·ï¼š13800138000
   çœä»½ï¼šåŒ—äº¬å¸‚
   åŸå¸‚ï¼šåŒ—äº¬å¸‚
   åŒºå¿ï¼šæœé˜³åŒº
   è¯¦ç»†åœ°å€ï¼šxxè¡—é“xxå·
   åœ°å€æ ‡ç­¾ï¼šå®¶
   è®¾ä¸ºé»˜è®¤ï¼šâœ“
   ```
3. ç‚¹å‡» **"ä¿å­˜"**
4. **é¢„æœŸç»“æœ**ï¼š
   - âœ… åœ°å€ä¿å­˜æˆåŠŸ
   - âœ… è‡ªåŠ¨é€‰ä¸­è¯¥åœ°å€

**éªŒè¯æ•°æ®åº“ï¼š**
- Supabase â†’ `addresses` è¡¨
- åº”è¯¥çœ‹åˆ°æ–°å¢çš„åœ°å€è®°å½•

#### 4.6.2 é€‰æ‹©ä¼˜æƒ åˆ¸ï¼ˆå¦‚æœ‰ï¼‰

1. ç‚¹å‡» **"é€‰æ‹©ä¼˜æƒ åˆ¸"**
2. é€‰æ‹©å¯ç”¨ä¼˜æƒ åˆ¸
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºä¼˜æƒ é‡‘é¢
   - âœ… è®¢å•æ€»ä»·å‡å°‘

#### 4.6.3 æäº¤è®¢å•

1. å¡«å†™å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
2. ç‚¹å‡» **"æäº¤è®¢å•"**
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… è®¢å•åˆ›å»ºæˆåŠŸ
   - âœ… è·³è½¬åˆ°è®¢å•è¯¦æƒ…é¡µ
   - âœ… æ˜¾ç¤ºè®¢å•å·ã€çŠ¶æ€ã€å•†å“ä¿¡æ¯
   - âœ… è´­ç‰©è½¦æ¸…ç©º

**éªŒè¯æ•°æ®åº“ï¼š**
- Supabase â†’ `orders` è¡¨ï¼šè®¢å•è®°å½•
- Supabase â†’ `order_items` è¡¨ï¼šè®¢å•å•†å“è®°å½•
- Supabase â†’ `cart_items` è¡¨ï¼šè´­ç‰©è½¦åº”è¯¥æ¸…ç©º

#### 4.6.4 æ¨¡æ‹Ÿæ”¯ä»˜ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰

1. åœ¨è®¢å•è¯¦æƒ…é¡µç‚¹å‡» **"å»æ”¯ä»˜"**
2. é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/ä½™é¢ï¼‰
3. ç‚¹å‡» **"ç¡®è®¤æ”¯ä»˜"**
4. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ”¯ä»˜æˆåŠŸæç¤º
   - âœ… è®¢å•çŠ¶æ€å˜ä¸º "å¾…å‘è´§"
   - âœ… å¦‚æœæ˜¯é‚€è¯·ç”¨æˆ·çš„é¦–å•ï¼Œé‚€è¯·äººåº”è·å¾—è¿”ç°

**éªŒè¯æ•°æ®åº“ï¼š**
- `orders` è¡¨ï¼š`status` å˜ä¸º "å¾…å‘è´§"ï¼Œ`payment_time` æœ‰å€¼
- `points_records` è¡¨ï¼šç”¨æˆ·è·å¾—ç§¯åˆ†è®°å½•
- `reward_records` è¡¨ï¼šå¦‚æœæ˜¯é‚€è¯·è®¢å•ï¼Œåº”æœ‰è¿”ç°è®°å½•

### 4.7 æµ‹è¯•é‚€è¯·è¿”ç°åŠŸèƒ½

#### 4.7.1 æ³¨å†Œæ–°ç”¨æˆ·ï¼ˆè¢«é‚€è¯·äººï¼‰

1. é€€å‡ºå½“å‰è´¦å·
2. æ³¨å†Œæ–°ç”¨æˆ·ï¼Œ**å¡«å†™é‚€è¯·ç **ï¼ˆæ­¥éª¤ 4.2 å¤åˆ¶çš„ï¼‰
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ³¨å†ŒæˆåŠŸ
   - âœ… æ”¶åˆ° 2 å¼  Â¥10 ä¼˜æƒ åˆ¸ï¼ˆæ»¡ Â¥200 å¯ç”¨ï¼‰

**éªŒè¯æ•°æ®åº“ï¼š**
- `invite_records` è¡¨ï¼šåº”æœ‰é‚€è¯·è®°å½•
- `user_coupons` è¡¨ï¼šåº”æœ‰ 2 å¼ ä¼˜æƒ åˆ¸

#### 4.7.2 è¢«é‚€è¯·äººä¸‹å•

1. ä½¿ç”¨æ–°è´¦å·è´­ä¹°å•†å“ï¼ˆé‡‘é¢ > Â¥200ï¼‰
2. å®Œæˆæ”¯ä»˜
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… è®¢å•åˆ›å»ºæˆåŠŸ
   - âœ… é‚€è¯·äººè·å¾— 5% è¿”ç°ï¼ˆè®¢å•é‡‘é¢ Ã— 0.05ï¼‰

**éªŒè¯æ•°æ®åº“ï¼š**
- `reward_records` è¡¨ï¼šåº”æœ‰è¿”ç°è®°å½•ï¼Œ`status` ä¸º "pending"
- `invite_records` è¡¨ï¼š`first_order_id` å’Œ `total_reward` æ›´æ–°

#### 4.7.3 é‚€è¯·äººæŸ¥çœ‹è¿”ç°

1. ç™»å½•é‚€è¯·äººè´¦å·
2. è¿›å…¥ **"ä¸ªäººä¸­å¿ƒ"** â†’ **"é‚€è¯·èµšé’±"**
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºé‚€è¯·äººæ•°
   - âœ… æ˜¾ç¤ºå¾…ç»“ç®—é‡‘é¢
   - âœ… æ˜¾ç¤ºå¯æç°é‡‘é¢ï¼ˆè®¢å•å®Œæˆ 7 å¤©åï¼‰
   - âœ… æ˜¾ç¤ºè¿”ç°è®°å½•åˆ—è¡¨

#### 4.7.4 æç°åˆ°ä½™é¢

1. ç­‰å¾…è®¢å•å®Œæˆï¼ˆæµ‹è¯•ç¯å¢ƒå¯æ‰‹åŠ¨ä¿®æ”¹æ•°æ®åº“ï¼‰
   ```sql
   -- åœ¨ Supabase SQL Editor æ‰§è¡Œ
   UPDATE reward_records 
   SET status = 'available', 
       available_at = NOW() - INTERVAL '1 day'
   WHERE status = 'pending';
   ```
2. åˆ·æ–°é¡µé¢
3. ç‚¹å‡» **"æç°åˆ°ä½™é¢"**
4. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æç°æˆåŠŸ
   - âœ… ä½™é¢å¢åŠ 
   - âœ… é’±åŒ…æ˜ç»†æ˜¾ç¤ºæç°è®°å½•

**éªŒè¯æ•°æ®åº“ï¼š**
- `users` è¡¨ï¼š`balance` å¢åŠ 
- `wallet_transactions` è¡¨ï¼šæœ‰æç°è®°å½•
- `reward_records` è¡¨ï¼š`status` å˜ä¸º "completed"

### 4.8 æµ‹è¯•å…¶ä»–åŠŸèƒ½

#### ç­¾åˆ°åŠŸèƒ½
1. è¿›å…¥ **"ä¸ªäººä¸­å¿ƒ"** â†’ **"ç§¯åˆ†"**
2. ç‚¹å‡» **"ç­¾åˆ°"**
3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… ç­¾åˆ°æˆåŠŸ
   - âœ… è·å¾—ç§¯åˆ†ï¼ˆè¿ç»­ç­¾åˆ°é€’å¢ï¼‰
   - âœ… ç§¯åˆ†ä½™é¢æ›´æ–°

#### ä¼˜æƒ åˆ¸ç®¡ç†
1. è¿›å…¥ **"ä¸ªäººä¸­å¿ƒ"** â†’ **"ä¼˜æƒ åˆ¸"**
2. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºå¯ç”¨/å·²ä½¿ç”¨/å·²è¿‡æœŸä¼˜æƒ åˆ¸
   - âœ… å¯ä»¥æŸ¥çœ‹ä¼˜æƒ åˆ¸è¯¦æƒ…

#### è®¢å•ç®¡ç†
1. è¿›å…¥ **"ä¸ªäººä¸­å¿ƒ"** â†’ **"æˆ‘çš„è®¢å•"**
2. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºæ‰€æœ‰è®¢å•
   - âœ… å¯ä»¥æŒ‰çŠ¶æ€ç­›é€‰
   - âœ… å¯ä»¥æŸ¥çœ‹è®¢å•è¯¦æƒ…
   - âœ… å¯ä»¥å–æ¶ˆæœªæ”¯ä»˜è®¢å•

#### åœ°å€ç®¡ç†
1. è¿›å…¥ **"ä¸ªäººä¸­å¿ƒ"** â†’ **"æ”¶è´§åœ°å€"**
2. **é¢„æœŸç»“æœ**ï¼š
   - âœ… æ˜¾ç¤ºæ‰€æœ‰åœ°å€
   - âœ… å¯ä»¥ç¼–è¾‘/åˆ é™¤åœ°å€
   - âœ… å¯ä»¥è®¾ç½®é»˜è®¤åœ°å€

---

## å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1ï¼šåç«¯éƒ¨ç½²å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Error: Cannot find module 'express'`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
cd backend
rm -rf node_modules package-lock.json
npm install
vercel --prod
```

### é—®é¢˜ 2ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

**é”™è¯¯ä¿¡æ¯**ï¼š`Network Error` æˆ– `CORS Error`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `.env` ä¸­çš„ `VITE_API_URL` æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥åç«¯ CORS é…ç½®æ˜¯å¦åŒ…å«å‰ç«¯åŸŸå
3. åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 3ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Error: Invalid Supabase credentials`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ Vercel ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®
2. ç¡®è®¤ Supabase é¡¹ç›®æœªæš‚åœï¼ˆå…è´¹ç‰ˆé•¿æœŸä¸ç”¨ä¼šæš‚åœï¼‰
3. é‡æ–°è·å– API å¯†é’¥å¹¶æ›´æ–°

### é—®é¢˜ 4ï¼šæ³¨å†Œ/ç™»å½•å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`User already exists` æˆ– `Invalid credentials`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æ•°æ®åº“ `users` è¡¨æ˜¯å¦æœ‰é‡å¤æ‰‹æœºå·
2. ç¡®è®¤å¯†ç åŠ å¯†é€»è¾‘æ­£å¸¸å·¥ä½œ
3. æŸ¥çœ‹åç«¯æ—¥å¿—ï¼šVercel â†’ é¡¹ç›® â†’ Functions â†’ æŸ¥çœ‹æ—¥å¿—

### é—®é¢˜ 5ï¼šè®¢å•åˆ›å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Foreign key constraint failed`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ç”¨æˆ·å·²ç™»å½•ï¼ˆæœ‰ `user_id`ï¼‰
2. ç¡®è®¤æ”¶è´§åœ°å€å·²åˆ›å»º
3. æ£€æŸ¥è´­ç‰©è½¦æ˜¯å¦æœ‰å•†å“
4. æŸ¥çœ‹æ•°æ®åº“å¤–é”®çº¦æŸæ˜¯å¦æ­£ç¡®

### é—®é¢˜ 6ï¼šå›¾ç‰‡æ— æ³•æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ CDN å›¾ç‰‡é“¾æ¥ï¼ˆå¦‚ Unsplashã€Cloudinaryï¼‰
2. æˆ–é…ç½® Supabase Storageï¼š
   - Supabase â†’ Storage â†’ Create bucket
   - ä¸Šä¼ å›¾ç‰‡
   - è·å–å…¬å¼€ URL

### é—®é¢˜ 7ï¼šVercel éƒ¨ç½²è¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨ --force å¼ºåˆ¶é‡æ–°éƒ¨ç½²
vercel --prod --force

# æˆ–æ¸…ç†æ„å»ºç¼“å­˜
vercel --prod --no-cache
```

### é—®é¢˜ 8ï¼šç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤åœ¨ Vercel æ­£ç¡®æ·»åŠ äº†ç¯å¢ƒå˜é‡
2. å˜é‡åå¿…é¡»å®Œå…¨åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
3. æ·»åŠ /ä¿®æ”¹ç¯å¢ƒå˜é‡åå¿…é¡» **Redeploy**
4. å‰ç«¯ç¯å¢ƒå˜é‡å¿…é¡»ä»¥ `VITE_` å¼€å¤´

---

## ğŸ‰ éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] Supabase é¡¹ç›®åˆ›å»ºæˆåŠŸ
- [ ] æ•°æ®åº“ 20 å¼ è¡¨å…¨éƒ¨åˆ›å»º
- [ ] åç«¯éƒ¨ç½²åˆ° Vercel
- [ ] åç«¯ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
- [ ] åç«¯ `/health` æ¥å£æ­£å¸¸
- [ ] å‰ç«¯éƒ¨ç½²åˆ° Vercel
- [ ] å‰ç«¯ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
- [ ] å‰ç«¯å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] ç”¨æˆ·ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] å•†å“æµè§ˆåŠŸèƒ½æ­£å¸¸
- [ ] è´­ç‰©è½¦åŠŸèƒ½æ­£å¸¸
- [ ] è®¢å•åˆ›å»ºåŠŸèƒ½æ­£å¸¸
- [ ] æ”¯ä»˜åŠŸèƒ½æ­£å¸¸ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰
- [ ] é‚€è¯·è¿”ç°åŠŸèƒ½æ­£å¸¸
- [ ] ç­¾åˆ°åŠŸèƒ½æ­£å¸¸
- [ ] ä¼˜æƒ åˆ¸åŠŸèƒ½æ­£å¸¸

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**ï¼š
   - Vercel: é¡¹ç›® â†’ Functions â†’ æŸ¥çœ‹å®æ—¶æ—¥å¿—
   - Supabase: Logs â†’ æŸ¥çœ‹æ•°æ®åº“æŸ¥è¯¢æ—¥å¿—
   - æµè§ˆå™¨: F12 â†’ Console/Network

2. **æ£€æŸ¥æ•°æ®åº“**ï¼š
   - Supabase â†’ Table Editor â†’ æŸ¥çœ‹æ•°æ®
   - SQL Editor â†’ æ‰§è¡ŒæŸ¥è¯¢è¯­å¥

3. **æµ‹è¯• API**ï¼š
   - ä½¿ç”¨ Postman æˆ– curl æµ‹è¯•åç«¯æ¥å£
   - æ£€æŸ¥è¯·æ±‚/å“åº”æ ¼å¼

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸš€**
